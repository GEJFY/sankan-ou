"""FP (ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚·ãƒ£ãƒ«ãƒ»ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°æŠ€èƒ½å£«) ãƒ—ãƒ©ã‚°ã‚¤ãƒ³"""

from src.plugins.base import CoursePlugin, ExamConfig, SynergyDef, TopicDef


class FPPlugin(CoursePlugin):
    course_code = "FP"
    course_name = "FPæŠ€èƒ½å£«ï¼ˆãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚·ãƒ£ãƒ«ãƒ»ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ï¼‰"
    description = "å›½å®¶è³‡æ ¼FPæŠ€èƒ½æ¤œå®šã€‚ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ãƒ»é‡‘èãƒ»ä¿é™ºãƒ»ä¸å‹•ç”£ãƒ»ç¨é‡‘ãƒ»ç›¸ç¶šã®6åˆ†é‡"
    color = "#2563eb"
    icon = "ğŸ’°"

    exam_config = ExamConfig(
        total_questions=70,
        duration_minutes=240,
        passing_score=0.60,
        sections=[
            {"part": 1, "name": "å­¦ç§‘è©¦é¨“", "questions": 60, "weight_pct": 50},
            {"part": 2, "name": "å®ŸæŠ€è©¦é¨“", "questions": 10, "weight_pct": 50},
        ],
        format_notes="FPæŠ€èƒ½æ¤œå®š1ç´šã€‚å­¦ç§‘(åŸºç¤ç·¨60å•+å¿œç”¨ç·¨)ã¨å®ŸæŠ€(å£é ­è©¦å•orç­†è¨˜)ã€‚"
        "åˆæ ¼åŸºæº–ã¯å„60%ä»¥ä¸Šã€‚å­¦ç§‘ã¯å¹´3å›(1æœˆãƒ»5æœˆãƒ»9æœˆ)å®Ÿæ–½ã€‚"
        "2ç´šã¯å­¦ç§‘60å•4æŠ+å®ŸæŠ€40å•ã€‚æ—¥æœ¬FPå”ä¼š/é‡‘è²¡ã®2å›£ä½“å®Ÿæ–½ã€‚",
    )

    def get_syllabus(self) -> list[TopicDef]:
        return [
            TopicDef(
                name="ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã¨è³‡é‡‘è¨ˆç”»",
                weight_pct=16.7,
                children=[
                    TopicDef(
                        name="ç¤¾ä¼šä¿é™ºãƒ»å…¬çš„å¹´é‡‘",
                        weight_pct=40.0,
                        keywords=["å›½æ°‘å¹´é‡‘", "åšç”Ÿå¹´é‡‘", "å¥åº·ä¿é™º", "é›‡ç”¨ä¿é™º"],
                    ),
                    TopicDef(
                        name="ãƒ©ã‚¤ãƒ•ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°æ‰‹æ³•",
                        weight_pct=30.0,
                        keywords=["ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¡¨", "å€‹äººãƒãƒ©ãƒ³ã‚¹ã‚·ãƒ¼ãƒˆ", "6ã¤ã®ä¿‚æ•°", "ä½å®…ãƒ­ãƒ¼ãƒ³"],
                    ),
                    TopicDef(
                        name="ä¼æ¥­å¹´é‡‘ãƒ»å€‹äººå¹´é‡‘",
                        weight_pct=30.0,
                        keywords=["ç¢ºå®šçµ¦ä»˜å¹´é‡‘", "ç¢ºå®šæ‹ å‡ºå¹´é‡‘", "iDeCo", "NISA"],
                    ),
                ],
            ),
            TopicDef(
                name="ãƒªã‚¹ã‚¯ç®¡ç†",
                weight_pct=16.7,
                children=[
                    TopicDef(
                        name="ç”Ÿå‘½ä¿é™º",
                        weight_pct=40.0,
                        keywords=["å®šæœŸä¿é™º", "çµ‚èº«ä¿é™º", "é¤Šè€ä¿é™º", "ç”Ÿå‘½ä¿é™ºæ–™æ§é™¤"],
                    ),
                    TopicDef(
                        name="æå®³ä¿é™º",
                        weight_pct=30.0,
                        keywords=["ç«ç½ä¿é™º", "è‡ªå‹•è»Šä¿é™º", "è³ å„Ÿè²¬ä»»ä¿é™º", "åœ°éœ‡ä¿é™º"],
                    ),
                    TopicDef(
                        name="ãƒªã‚¹ã‚¯ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ",
                        weight_pct=30.0,
                        keywords=["ãƒªã‚¹ã‚¯ã®ç§»è»¢", "ãƒªã‚¹ã‚¯ã®ä¿æœ‰", "ä¿é™ºç´„æ¬¾", "å‘ŠçŸ¥ç¾©å‹™"],
                    ),
                ],
            ),
            TopicDef(
                name="é‡‘èè³‡ç”£é‹ç”¨",
                weight_pct=16.7,
                children=[
                    TopicDef(
                        name="é‡‘èå¸‚å ´ã¨çµŒæ¸ˆæŒ‡æ¨™",
                        weight_pct=25.0,
                        keywords=["GDP", "æ—¥éŠ€æ”¿ç­–", "é‡‘åˆ©", "ç‚ºæ›¿"],
                    ),
                    TopicDef(
                        name="æ ªå¼ãƒ»å‚µåˆ¸æŠ•è³‡",
                        weight_pct=30.0,
                        keywords=["PER", "PBR", "é…å½“åˆ©å›ã‚Š", "å‚µåˆ¸ä¾¡æ ¼ã¨åˆ©å›ã‚Š"],
                    ),
                    TopicDef(
                        name="æŠ•è³‡ä¿¡è¨—ãƒ»ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª",
                        weight_pct=25.0,
                        keywords=["æŠ•è³‡ä¿¡è¨—", "ETF", "åˆ†æ•£æŠ•è³‡", "ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ª"],
                    ),
                    TopicDef(
                        name="ãƒ‡ãƒªãƒãƒ†ã‚£ãƒ–ãƒ»å¤–è²¨å»ºå•†å“",
                        weight_pct=20.0,
                        keywords=["å…ˆç‰©", "ã‚ªãƒ—ã‚·ãƒ§ãƒ³", "å¤–è²¨é é‡‘", "FX"],
                    ),
                ],
            ),
            TopicDef(
                name="ã‚¿ãƒƒã‚¯ã‚¹ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°",
                weight_pct=16.7,
                children=[
                    TopicDef(
                        name="æ‰€å¾—ç¨",
                        weight_pct=40.0,
                        keywords=["10ç¨®é¡ã®æ‰€å¾—", "æç›Šé€šç®—", "æ‰€å¾—æ§é™¤", "ç¨é¡æ§é™¤"],
                    ),
                    TopicDef(
                        name="æ³•äººç¨ãƒ»æ¶ˆè²»ç¨",
                        weight_pct=30.0,
                        keywords=["æ³•äººç¨ç‡", "æé‡‘ç®—å…¥", "æ¶ˆè²»ç¨", "ã‚¤ãƒ³ãƒœã‚¤ã‚¹åˆ¶åº¦"],
                    ),
                    TopicDef(
                        name="ç¢ºå®šç”³å‘Šãƒ»é’è‰²ç”³å‘Š",
                        weight_pct=30.0,
                        keywords=["ç¢ºå®šç”³å‘Š", "é’è‰²ç”³å‘Šç‰¹åˆ¥æ§é™¤", "e-Tax", "å¹´æœ«èª¿æ•´"],
                    ),
                ],
            ),
            TopicDef(
                name="ä¸å‹•ç”£",
                weight_pct=16.7,
                children=[
                    TopicDef(
                        name="ä¸å‹•ç”£ã®å–å¼•",
                        weight_pct=35.0,
                        keywords=["å®…å»ºæ¥­æ³•", "å€Ÿåœ°å€Ÿå®¶æ³•", "ä¸å‹•ç”£ç™»è¨˜", "é‡è¦äº‹é …èª¬æ˜"],
                    ),
                    TopicDef(
                        name="ä¸å‹•ç”£ã®ç¨é‡‘",
                        weight_pct=35.0,
                        keywords=["ä¸å‹•ç”£å–å¾—ç¨", "å›ºå®šè³‡ç”£ç¨", "è­²æ¸¡æ‰€å¾—", "3,000ä¸‡å††ç‰¹åˆ¥æ§é™¤"],
                    ),
                    TopicDef(
                        name="ä¸å‹•ç”£ã®æœ‰åŠ¹æ´»ç”¨",
                        weight_pct=30.0,
                        keywords=["å»ºè”½ç‡", "å®¹ç©ç‡", "ç”¨é€”åœ°åŸŸ", "ç­‰ä¾¡äº¤æ›"],
                    ),
                ],
            ),
            TopicDef(
                name="ç›¸ç¶šãƒ»äº‹æ¥­æ‰¿ç¶™",
                weight_pct=16.7,
                children=[
                    TopicDef(
                        name="ç›¸ç¶šç¨",
                        weight_pct=35.0,
                        keywords=["æ³•å®šç›¸ç¶šåˆ†", "éºç•™åˆ†", "åŸºç¤æ§é™¤", "ç›¸ç¶šç¨ã®è¨ˆç®—"],
                    ),
                    TopicDef(
                        name="è´ˆä¸ç¨",
                        weight_pct=30.0,
                        keywords=["æš¦å¹´è´ˆä¸", "ç›¸ç¶šæ™‚ç²¾ç®—èª²ç¨", "æ•™è‚²è³‡é‡‘è´ˆä¸", "ä½å®…è³‡é‡‘è´ˆä¸"],
                    ),
                    TopicDef(
                        name="äº‹æ¥­æ‰¿ç¶™å¯¾ç­–",
                        weight_pct=35.0,
                        keywords=["è‡ªç¤¾æ ªè©•ä¾¡", "äº‹æ¥­æ‰¿ç¶™ç¨åˆ¶", "éºè¨€", "æ°‘äº‹ä¿¡è¨—"],
                    ),
                ],
            ),
        ]

    def get_synergy_areas(self) -> list[SynergyDef]:
        return [
            SynergyDef(
                area_name="ç¨å‹™ãƒ»ã‚¿ãƒƒã‚¯ã‚¹ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°",
                overlap_pct=82.0,
                related_courses=["USCPA", "BOKI1"],
                term_mappings={
                    "FP": "å€‹äººãƒ»æ³•äººã®ç¨é‡‘è¨ˆç®—ã¨ç¯€ç¨æˆ¦ç•¥",
                    "USCPA": "REG - Taxation and Regulation(ç±³å›½ç¨å‹™)",
                    "BOKI1": "ç¨åŠ¹æœä¼šè¨ˆãƒ»æ³•äººç¨ç­‰ã®è¨ˆç®—",
                },
            ),
            SynergyDef(
                area_name="é‡‘èå•†å“ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†",
                overlap_pct=72.0,
                related_courses=["CFE", "CIA"],
                term_mappings={
                    "FP": "é‡‘èè³‡ç”£é‹ç”¨ã¨ãƒªã‚¹ã‚¯ç®¡ç†(ä¿é™ºãƒ»æŠ•è³‡)",
                    "CFE": "é‡‘èå–å¼•ã¨ä¸æ­£ã‚¹ã‚­ãƒ¼ãƒ (Financial Transactions)",
                    "CIA": "ãƒªã‚¹ã‚¯ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ(ERM)ã¨çµ±åˆ¶æ´»å‹•",
                },
            ),
            SynergyDef(
                area_name="ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ»æ³•è¦åˆ¶",
                overlap_pct=68.0,
                related_courses=["CIA", "USCPA"],
                term_mappings={
                    "FP": "é‡‘èå•†å“å–å¼•æ³•ãƒ»ä¿é™ºæ¥­æ³•ãƒ»å®…å»ºæ¥­æ³•",
                    "CIA": "æ³•ä»¤éµå®ˆã¨è¦åˆ¶ç’°å¢ƒã®ç†è§£",
                    "USCPA": "REG - ãƒ“ã‚¸ãƒã‚¹æ³•(å¥‘ç´„æ³•ãƒ»UCC)",
                },
            ),
        ]
